import React, { useState,useEffect } from 'react'; import { View,Text,Button, TouchableOpacity,StyleSheet,DeviceEventEmitter,NativeAppEventEmitter,Platform,} from 'react-native'; //import RootNavigation from "./src/navigations/RootNavigation"; import BackgroundTimer from 'react-native-background-timer'; function App() { const [secondsLeft, setsecondsLeft] = useState(3601); const [timerOn, settimerOn] = useState(false); useEffect(() => { if(timerOn) startTimer(); else BackgroundTimer.stopBackgroundTimer(); return()=>{ BackgroundTimer.stopBackgroundTimer(); } },[timerOn]) useEffect(()=>{ if(secondsLeft===0){ BackgroundTimer.stopBackgroundTimer(); } },[secondsLeft]) const startTimer=()=>{ BackgroundTimer.runBackgroundTimer(() => { setsecondsLeft((secs)=>{ if(secs>0)return secs-1; else return 0; }) }, 1000); //BackgroundTimer.stopBackgroundTimer(); } const clockify=()=>{ let hours=Math.floor(secondsLeft/60/60) let mins=Math.floor(secondsLeft/60%60) let seconds=Math.floor(secondsLeft%60) let displayHours=hours<10? `0${hours}`:hours; let displayMins=mins<10? `0${mins}`:mins; let displaySecs=seconds<10? `0${seconds}`:seconds; return{ displayHours,displayMins,displaySecs, }; } return ( <View> <Text>{clockify().displayHours} hours : {clockify().displayMins} mins : {clockify().displaySecs} sec   </Text> <Button onPress={()=>{ settimerOn((current)=> !current) }} title="Stop/Start"></Button> </View> ); } export default App;